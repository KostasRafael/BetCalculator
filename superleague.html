<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="./superleague.css" type="text/css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Bungee+Spice&family=Raleway:ital,wght@0,100..900;1,100..900&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="./assets/components/next-fixture-row/next-fixture-row.css">
    <link rel="stylesheet" href="./assets/components/single-team-container/single-team-container.css">
    <link rel="stylesheet" href="./assets/components/fixtures-row/fixtures-row.css">
    <link rel="stylesheet" href="./assets/components/close-button/close-button.css">
    <link rel="stylesheet" href="./assets/components/navigation/navigation.css">
    <script src="./functions.js"></script>
    <script src="./superleague-teams.js"></script>
    <script src="./team-fixture-card.js"></script>
    <script src="https://kit.fontawesome.com/50ab0d686f.js" crossorigin="anonymous"></script>
</head>

<body>

    <navigation-custom></navigation-custom>

    <section class="laptop-next-fixtures">
        <div class="keyboard-screen">
            <div class="screen">
                <div class="data-div data-div-one"> </div>
                <div class="data-div data-div-two"></div>
            </div>

            <div class="all-teams-container"></div>
        </div>


        <!--next 7 games with odds-->
        <div class="next-fixtures-container">

        </div>
    </section>

</body>
<script src="./superleague-next-seven-games-odds.js"></script>
<script src="./assets/components/single-team-container/single-team-container.js" type="module" defer></script>
<script src="./assets/components/fixtures-row/fixtures-row.js"></script>
<script src="./assets/components/next-fixture-row/next-fixture-row.js"></script>
<script src="./assets/components/close-button/close-button.js"></script>
<script src="./assets/components/navigation/navigation.js"></script>
<script>

    const headers = {
        "x-rapidapi-host": "v3.football.api-sports.io",
        "x-rapidapi-key": "94d01bff67718f85de3f0532069fbbf1",
    };


    // To display logo image

    let olympiakosLogo;
    let aekLogo;
    let panathinaikosLogo;
    let paokLogo;
    let panetolikosLogo;
    let larisaLogo;
    let asterasLogo;
    let levadiakosLogo;
    let arisLogo;
    let ofiLogo;
    let panseraikosLogo;
    let volosLogo;
    let kifisiaLogo;
    let atromitosLogo;


    function fetchAllTeams() {
        return fetch("https://v3.football.api-sports.io/teams?league=197&season=2025", { headers }).then(response => response.json())
            .then((data) => {
                const allteams = data.response;
                console.log("allTeams", allteams);
                return allteams;
            });
    }

    async function extractAllTeams() {
        const allTeamsArray = await fetchAllTeams();
        allTeamsArray.map(team => {
            console.log("all", allTeamsArray)
            let teamName = team.team.name;
            console.log("name", teamName);
            let teamLogo = team.team.logo;
            if (teamName === "Olympiakos Piraeus") {
                olympiakosLogo = teamLogo;
            } else if (teamName === "AEK Athens FC") {
                aekLogo = teamLogo;
            } else if (teamName === "Panathinaikos") {
                panathinaikosLogo = teamLogo;
            } else if (teamName === "PAOK") {
                paokLogo = teamLogo;
            } else if (teamName === "Panetolikos") {
                panetolikosLogo = teamLogo;
            } else if (teamName === "Larisa") {
                larisaLogo = teamLogo;
            } else if (teamName === "Asteras Tripolis") {
                asterasLogo = teamLogo;
            } else if (teamName === "Levadiakos") {
                levadiakosLogo = teamLogo;
            } else if (teamName === "Aris Thessalonikis") {
                arisLogo = teamLogo;
            } else if (teamName === "OFI") {
                ofiLogo = teamLogo;
            } else if (teamName === "Panserraikos") {
                panseraikosLogo = teamLogo;
            } else if (teamName === "Volos NFC") {
                volosLogo = teamLogo;
            } else if (teamName === "Kifisia") {
                kifisiaLogo = teamLogo;
            } else if (teamName === "Atromitos") {
                atromitosLogo = teamLogo;
            }
        })

        const allTeamsContainer = document.querySelector(".all-teams-container");
        allTeamsContainer.innerHTML = `
                 <single-team-container class="team-div olympiakos" team-name="Olympiakos"
                    team-logo="${olympiakosLogo}"></single-team-container>
                <single-team-container class="team-div aek" team-name="Aek"  team-logo="${aekLogo}""></single-team-container>
                <single-team-container class="team-div aris" team-name="Aris"
                    team-logo="${arisLogo}"></single-team-container>
                <single-team-container class="team-div volos" team-name="Volos"
                    team-logo="${volosLogo}"></single-team-container>
                <single-team-container class="team-div panseraikos" team-name="Panseraikos"
                   team-logo="${panseraikosLogo}""></single-team-container>
                <single-team-container class="team-div asteras" team-name="Asteras Tripolis"
                    team-logo="${asterasLogo}"></single-team-container>
                <single-team-container class="team-div kifisia" team-name="Kifisia"
                   team-logo="${kifisiaLogo}"></single-team-container>
                <single-team-container class="team-div panetolikos" team-name="Panetolikos"
                    team-logo="${panetolikosLogo}"></single-team-container>
                <single-team-container class="team-div ofi" team-name="Ofi"  team-logo="${ofiLogo}"></single-team-container>
                <single-team-container class="team-div larissa" team-name="Larissa"
                     team-logo="${larisaLogo}"></single-team-container>
                <single-team-container class="team-div atromitos" team-name="Atromitos"
                    team-logo="${atromitosLogo}"></single-team-container>
                <single-team-container class="team-div levadiakos" team-name="Levadiakos"
                     team-logo="${levadiakosLogo}"></single-team-container>
                <single-team-container class="team-div paok" team-name="Paok"
                     team-logo="${paokLogo}"></single-team-container>
                <single-team-container class="team-div panathinaikos " team-name="Panathinaikos"
                    team-logo="${panathinaikosLogo}"></single-team-container>

                    `
    }

    extractAllTeams();


    const olympiakosDiv = document.querySelector(".olympiakos");
    const aekDiv = document.querySelector(".aek");
    const panathinaikosDiv = document.querySelector(".panathinaikos");
    const paokDiv = document.querySelector(".paok");
    const panetolikosDiv = document.querySelector(".panetolikos");
    const larisaDiv = document.querySelector(".larissa");
    const asterasDiv = document.querySelector(".asteras");
    const atromitosDiv = document.querySelector(".atromitos");
    const kifisiaDiv = document.querySelector(".kifisia");
    const panseraikosDiv = document.querySelector(".panseraikos");
    const levadiakosDiv = document.querySelector(".levadiakos");
    const ofiDiv = document.querySelector(".ofi");
    const arisDiv = document.querySelector(".aris");
    const volosDiv = document.querySelector(".volos");

    const allTeams = [
        { id: 553, name: "olympiakos" },
        { id: 575, name: "aek" },
        { id: 617, name: "panathinaikos" },
        { id: 619, name: "paok" },
        { id: 949, name: "panetolikos" },
        { id: 953, name: "larissa" },
        { id: 955, name: "asteras" },
        { id: 957, name: "levadiakos" },
        { id: 1123, name: "aris" },
        { id: 1124, name: "ofi" },
        { id: 2099, name: "panseraikos" },
        { id: 2110, name: "volos" },
        { id: 5050, name: "kifisia" },
        { id: 12260, name: "atromitos" }
    ]

    // The variables where each array of fixtures is saved once the fetchAndSaveAllTeamFixtures() function is executed
    let olympiakosFixtures;
    let aekFixtures
    let panathinaikosFixtures;
    let paokFixtures;
    let panetolikosFixtures;
    let larissaFixtures;
    let asterasFixtures;
    let levadiakosFixtures;
    let arisFixtures;
    let ofiFixtures;
    let panseraikosFixtures;
    let volosFixtures;
    let kifisiaFixtures;
    let atromitosFixtures;

    // fetches the past 10 fixtures of each team, and stores each array of fixtures within the variables
    fetchAndSaveAllTeamsFixtures();

    const screen = document.querySelector(".screen");
    const dataDivOne = document.querySelector(".data-div-one");
    const dataDivTwo = document.querySelector(".data-div-two");


    // The clickedTeamFixturesArray is passed where the function is called in the
    async function displayTeamFixtures(teamFixtures) {
        await fetchAndSaveAllTeamsFixtures();

        // Huge: allFixturesDiv is created only once you have clicked the button
        let allFixturesDiv = document.createElement("div");
        allFixturesDiv.classList.add("all-fixtures-div");

        let closeButton = document.createElement("close-button");
        allFixturesDiv.appendChild(closeButton);

        let resultsHeading = document.createElement("h2");
        resultsHeading.classList.add("results-heading");
        resultsHeading.textContent = `Results`;
        allFixturesDiv.appendChild(resultsHeading);



        for (fixture of teamFixtures) {
            let fixtureRow = document.createElement("fixtures-row");
            fixtureRow.setAttribute("home-team-name", fixture.teams.home.name);
            fixtureRow.setAttribute("away-team-name", fixture.teams.away.name);
            fixtureRow.setAttribute("home-team-goals", fixture.goals.home);
            fixtureRow.setAttribute("away-team-goals", fixture.goals.away);
            allFixturesDiv.appendChild(fixtureRow);
        }
        // The allFixturesDiv has 7 fixtures-row, 7 divs.

        // Here I care only about the content of DataDivOne
        if (dataDivOne.querySelector(".all-fixtures-div")) {
            if (dataDivTwo.querySelector(".all-fixtures-div")) {
                clearDataDivTwo();
                dataDivTwo.appendChild(allFixturesDiv);
                closeButton.setAttribute("onclick", "clearDataDivTwo()");
                dataDivTwo.classList.add("show");
            } else {
                dataDivTwo.appendChild(allFixturesDiv);
                closeButton.setAttribute("onclick", "clearDataDivTwo()");
                dataDivTwo.classList.add("show");
            }
        } else {
            dataDivOne.appendChild(allFixturesDiv);
            closeButton.setAttribute("onclick", "clearDataDivOne()");
            dataDivOne.classList.add("show");
        }


    }


    // Function that will be executed upon the execution of an event
    // It will be able to receive an event object as argument
    function clearDataDivOne() {
        dataDivOne.classList.remove("show");
        dataDivOne.querySelector(".all-fixtures-div").remove();
    }

    function clearDataDivTwo() {
        dataDivTwo.classList.remove("show");
        dataDivTwo.querySelector(".all-fixtures-div").remove();
    }






















</script>

</html>